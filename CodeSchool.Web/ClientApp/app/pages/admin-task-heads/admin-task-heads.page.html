<div class="container">
    <div class="row">
        <div class="col-md-4">
            <category-selector local-storage-key="adminTaskHeads" (onCategoryChanged)="onCategoryChanged($event)"></category-selector>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <input class="form-control" placeholder="Название раздела" [(ngModel)]="taskHead.title" />
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <button (click)="addOrUpdateTaskHead()" class="btn btn-primary">Создать/Обновить</button>
            </div>
        </div>
    </div>
    
    <hr/>

    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading"><h4>Разделы</h4></div>
                <div class="panel-body">
                    <div *ngFor="let taskHead of taskHeads; let i = index;" class="col-md-12">
                        
                        <div class="col-md-6">
                            <a href="javascript: " (click)="editTaskHead(taskHead)"><h4 style="display: inline-block">
                                {{ taskHead.title }} - {{ TaskHeadType[taskHead.type] }}
                            </h4></a>
                            <a class="alert-success" [routerLink]="['/admin-task', taskHead.id]">
                                <span class="fa fa-plus"></span>
                            </a>
                            <a class="alert-danger" href="javascript: " (click)="removeTaskHead(taskHead.id)">
                                <span class="fa fa-remove"></span>
                            </a>
                            <a *ngIf="i != 0" class="alert-info" href="javascript: " (click)="changeTaskHeadOrder(i, i-1)">
                                <span class="fa fa-arrow-up"></span>
                            </a>
                            <a *ngIf="i != taskHeads.length-1" class="alert-info" href="javascript: " (click)="changeTaskHeadOrder(i, i+1)">
                                <span class="fa fa-arrow-down"></span>
                            </a>
                            <a href="javascript: " [routerLink]="['/share', taskHead.id]">
                                <span class="fa fa-share"></span>
                            </a>
                        </div>

                        <div class="col-md-12" *ngFor="let SubTask of taskHead.SubTasks; let i = index;">
                            <a [routerLink]="['/admin-SubTask', taskHead.id, SubTask.id]">
                                <h5 style="display: inline-block">{{ SubTask.title }}</h5>
                            </a>
                            <a *ngIf="!SubTask.published" href="javascript: " (click)="publishSubTask(taskHead.id, SubTask)">
                                <span class="fa fa-pencil"></span>
                            </a>
                            <a class="alert-danger" href="javascript: " (click)="removeSubTask(taskHead, SubTask.id)">
                                <span class="fa fa-remove"></span>
                            </a>
                            <a *ngIf="i != 0" class="alert-info" href="javascript: " (click)="changeSubTaskOrder(taskHead, i, i-1)">
                                <span class="fa fa-arrow-up"></span>
                            </a>
                            <a *ngIf="i != taskHead.SubTasks.length-1" class="alert-info" href="javascript: " (click)="changeSubTaskOrder(taskHead, i, i+1)">
                                <span class="fa fa-arrow-down"></span>
                            </a>
                            <a *ngIf="SubTask.published" href="javascript: " [routerLink]="['/share', taskHead.id, SubTask.id]">
                                <span class="fa fa-share"></span>
                            </a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>